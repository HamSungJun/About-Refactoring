## Retrospect

### 이번 챕터의 리팩토링 기법

- 함수 추출하기
- 변수 인라인하기
- 함수 옮기기
- 조건부 로직을 다형성으로 바꾸기
- 단계 쪼개기

### 느낀점

> 함수내에 선언된 지역함수(중첩함수)를 많이 선언하는 부분에 대해서 처음에는 의아하게 생각했다. 왜냐하면 되도록 많은 순수함수를 작성하여 추후 개발하는 단계에서도 사용할 수 있는 함수를 갖추는 것이 리팩토링의 한 과정이라고 생각했기 때문이다. 하지만 중첩함수로 추출하는 과정을 통해 메인 함수에 전달된 파라미터를 다시 파라미터로 넘기지 않아도 되는 편리함과 점차적으로 메인 함수 로직에 선언된 지역변수를 하나씩 제거해가는 과정이 인상적이었다.

개인적으로는 함수를 추출하는 과정에서 순수함수로 추출할 것인가, 중첩함수로 추출할 것인가에 대한 의사결정 기준은 아래의 경우를 생각하여 결정하려고 한다.

- 이번에 추출하는 함수가 메인함수의 도메인에 얼마나 연관관계가 있는가?
- 이번에 추출하는 함수가 얼마나 독립적으로 사용할 수 있는가?

> 조건부 로직을 다형성으로 대응하는 부분또한 유지보수 측면에 도움이 많이 된다고 생각한다. 조건 케이스 블록을 추후에 지속적으로 추가하다보면 한 소스 코드 파일이 점점 거대해질 것이다. 슈퍼 클래스와 서브 클래스 관계를 두고 하나의 조건에 해당하는 로직을 서브 클래스의 스코프에서 지속적으로 관리하면 앞으로 특정 조건에 대한 로직은 해당 서브 클래스 소스 파일만 집중적으로 파악하며 관리하면 된다. 이런 방식은 코드를 스플리팅 하는 효과까지 얻을 수 있다. 또 중복되어 나타나는 로직은 슈퍼 클래스에 한번 정의하는 것을 통해 앞으로 소스코드를 효율적으로 정의 및 관리하는 습관에 다가갈 수 있을 것으로 보인다.